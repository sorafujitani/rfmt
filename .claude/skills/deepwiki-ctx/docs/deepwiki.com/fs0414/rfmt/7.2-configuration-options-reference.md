---
title: "Configuration Options Reference | fs0414/rfmt | DeepWiki"
source_url: "https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference"
fetched_at: "2026-01-13T10:53:43.101777+00:00"
---



Loading...

Index your code with Devin

[DeepWiki](https://deepwiki.com/)

[DeepWiki](https://deepwiki.com/)

[fs0414/rfmt](https://github.com/fs0414/rfmt "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 3 January 2026 ([90c575](https://github.com/fs0414/rfmt/commits/90c575e6))

* [Overview](https://deepwiki.com/fs0414/rfmt/1-overview.html)
* [Architecture Overview](https://deepwiki.com/fs0414/rfmt/1.1-architecture-overview.html)
* [Key Concepts](https://deepwiki.com/fs0414/rfmt/1.2-key-concepts.html)
* [Getting Started](https://deepwiki.com/fs0414/rfmt/2-getting-started.html)
* [Installation](https://deepwiki.com/fs0414/rfmt/2.1-installation.html)
* [Configuration](https://deepwiki.com/fs0414/rfmt/2.2-configuration.html)
* [User Guides](https://deepwiki.com/fs0414/rfmt/3-user-guides.html)
* [CLI Usage](https://deepwiki.com/fs0414/rfmt/3.1-cli-usage.html)
* [Ruby API](https://deepwiki.com/fs0414/rfmt/3.2-ruby-api.html)
* [Editor Integration](https://deepwiki.com/fs0414/rfmt/3.3-editor-integration.html)
* [Core Systems](https://deepwiki.com/fs0414/rfmt/4-core-systems.html)
* [AST Representation](https://deepwiki.com/fs0414/rfmt/4.1-ast-representation.html)
* [Formatting Engine (Emitter)](https://deepwiki.com/fs0414/rfmt/4.2-formatting-engine-(emitter).html)
* [Parser Integration (PrismBridge)](https://deepwiki.com/fs0414/rfmt/4.3-parser-integration-(prismbridge).html)
* [Configuration System](https://deepwiki.com/fs0414/rfmt/4.4-configuration-system.html)
* [Caching System](https://deepwiki.com/fs0414/rfmt/4.5-caching-system.html)
* [Logging System](https://deepwiki.com/fs0414/rfmt/4.6-logging-system.html)
* [Formatting Behavior](https://deepwiki.com/fs0414/rfmt/5-formatting-behavior.html)
* [Control Flow Formatting](https://deepwiki.com/fs0414/rfmt/5.1-control-flow-formatting.html)
* [Exception Handling Formatting](https://deepwiki.com/fs0414/rfmt/5.2-exception-handling-formatting.html)
* [Lambda and Block Formatting](https://deepwiki.com/fs0414/rfmt/5.3-lambda-and-block-formatting.html)
* [Development](https://deepwiki.com/fs0414/rfmt/6-development.html)
* [Building from Source](https://deepwiki.com/fs0414/rfmt/6.1-building-from-source.html)
* [Testing](https://deepwiki.com/fs0414/rfmt/6.2-testing.html)
* [Release Process](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html)
* [Reference](https://deepwiki.com/fs0414/rfmt/7-reference.html)
* [Node Types Reference](https://deepwiki.com/fs0414/rfmt/7.1-node-types-reference.html)
* [Configuration Options Reference](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html)
* [Error Codes Reference](https://deepwiki.com/fs0414/rfmt/7.3-error-codes-reference.html)
* [Performance and Benchmarks](https://deepwiki.com/fs0414/rfmt/7.4-performance-and-benchmarks.html)

Menu

# Configuration Options Reference

Relevant source files

* [README.md](https://github.com/fs0414/rfmt/blob/90c575e6/README.md)
* [docs/user\_guide.ja.md](https://github.com/fs0414/rfmt/blob/90c575e6/docs/user_guide.ja.md)
* [docs/user\_guide.md](https://github.com/fs0414/rfmt/blob/90c575e6/docs/user_guide.md)
* [ext/rfmt/src/config/mod.rs](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs)
* [ext/rfmt/src/logging/logger.rs](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/logging/logger.rs)
* [spec/config\_formatting\_spec.rb](https://github.com/fs0414/rfmt/blob/90c575e6/spec/config_formatting_spec.rb)

This page provides a complete reference for all configuration options available in rfmt. It documents the configuration file format, discovery mechanism, available options, validation rules, and environment variables.

For general configuration usage and examples, see [Configuration](https://deepwiki.com/fs0414/rfmt/2.2-configuration.html). For information about how the configuration system is implemented internally, see [Configuration System](https://deepwiki.com/fs0414/rfmt/4.4-configuration-system.html).

## Configuration Discovery

rfmt searches for configuration files in a hierarchical manner, stopping at the first file found.

### Discovery Order

**Sources:** [ext/rfmt/src/config/mod.rs102-138](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L102-L138)

### File Name Priority

When multiple configuration files exist in the same directory, rfmt uses the first match in this order:

1. `rfmt.yml`
2. `rfmt.yaml`
3. `.rfmt.yml`
4. `.rfmt.yaml`

**Sources:** [ext/rfmt/src/config/mod.rs105](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L105-L105)

## Configuration File Structure

The configuration file uses YAML format with the following top-level structure:

**Sources:** [ext/rfmt/src/config/mod.rs4-20](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L4-L20) [ext/rfmt/src/config/mod.rs22-27](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L22-L27) [ext/rfmt/src/config/mod.rs29-45](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L29-L45) [ext/rfmt/src/config/mod.rs63-73](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L63-L73)

### Complete Example

**Sources:** [README.md123-143](https://github.com/fs0414/rfmt/blob/90c575e6/README.md#L123-L143) [docs/user\_guide.md89-118](https://github.com/fs0414/rfmt/blob/90c575e6/docs/user_guide.md#L89-L118)

## Configuration Options

### Top-Level Options

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `version` | `String` | `"1.0"` | Configuration schema version |
| `parser` | `ParserConfig` | See below | Parser-specific settings |
| `formatting` | `FormattingConfig` | See below | Formatting rules and styles |
| `include` | `Vec<String>` | `["**/*.rb", "**/*.rake"]` | Glob patterns for files to format |
| `exclude` | `Vec<String>` | `["vendor/**/*", "tmp/**/*", "node_modules/**/*"]` | Glob patterns for files to exclude |

**Sources:** [ext/rfmt/src/config/mod.rs4-20](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L4-L20) [ext/rfmt/src/config/mod.rs229-243](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L229-L243)

### Parser Configuration

The `parser` section controls parser behavior:

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `version` | `String` | `"latest"` | Prism parser version to use |
| `error_tolerance` | `bool` | `true` | Continue parsing on syntax errors |
| `encoding` | `String` | `"UTF-8"` | Source file encoding |

**Sources:** [ext/rfmt/src/config/mod.rs22-27](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L22-L27) [ext/rfmt/src/config/mod.rs245-252](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L245-L252)

### Formatting Configuration

The `formatting` section contains the primary formatting options:

| Option | Type | Default | Validation | Description |
| --- | --- | --- | --- | --- |
| `line_length` | `usize` | `100` | `40..=500` | Maximum line length before wrapping |
| `indent_width` | `usize` | `2` | `1..=8` | Number of spaces or tabs per indentation level |
| `indent_style` | `IndentStyle` | `"spaces"` | See enum | Use spaces or tabs for indentation |
| `quote_style` | `QuoteStyle` | `"double"` | See enum | Preferred quote style for strings |
| `style` | `StyleConfig` | See below | N/A | Additional style settings |

**Sources:** [ext/rfmt/src/config/mod.rs29-45](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L29-L45) [ext/rfmt/src/config/mod.rs47-53](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L47-L53) [ext/rfmt/src/config/mod.rs159-181](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L159-L181)

### IndentStyle Enum

| Value | Description | Behavior |
| --- | --- | --- |
| `"spaces"` | Use spaces for indentation (default) | Each level indented by `indent_width` spaces |
| `"tabs"` | Use tabs for indentation | Each level indented by one tab character |

**Sources:** [ext/rfmt/src/config/mod.rs55-61](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L55-L61) [ext/rfmt/src/config/mod.rs184-190](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L184-L190)

### QuoteStyle Enum

| Value | Description | Behavior |
| --- | --- | --- |
| `"double"` | Prefer double quotes (default) | Use `"string"` format |
| `"single"` | Prefer single quotes | Use `'string'` format |
| `"consistent"` | Keep existing quote style | Don't change quotes |

**Sources:** [ext/rfmt/src/config/mod.rs75-82](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L75-L82)

### Style Configuration

The `style` subsection within `formatting` provides additional style controls:

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `quotes` | `QuoteStyle` | `"double"` | String quote preference (same as `formatting.quote_style`) |
| `hash_syntax` | `HashSyntax` | `"ruby19"` | Hash syntax style |
| `trailing_comma` | `TrailingComma` | `"multiline"` | Trailing comma rules |

**Sources:** [ext/rfmt/src/config/mod.rs63-73](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L63-L73) [ext/rfmt/src/config/mod.rs267-274](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L267-L274)

### HashSyntax Enum

| Value | Description | Example |
| --- | --- | --- |
| `"ruby19"` | Use Ruby 1.9+ symbol syntax (default) | `{ key: value }` |
| `"hash_rockets"` | Use hash rockets | `{ :key => value }` |
| `"consistent"` | Keep existing style | Don't change syntax |

**Sources:** [ext/rfmt/src/config/mod.rs84-90](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L84-L90)

### TrailingComma Enum

| Value | Description | Example |
| --- | --- | --- |
| `"always"` | Always add trailing comma | `[1, 2, 3,]` |
| `"never"` | Never add trailing comma | `[1, 2, 3]` |
| `"multiline"` | Add on multiline only (default) | `[1,` `2,` `3,]` |

**Sources:** [ext/rfmt/src/config/mod.rs92-99](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L92-L99)

## File Filtering

### Include Patterns

The `include` section specifies glob patterns for files to format. Multiple patterns are combined with OR logic.

**Default patterns:**

**Sources:** [ext/rfmt/src/config/mod.rs235](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L235-L235)

### Exclude Patterns

The `exclude` section specifies glob patterns for files to skip. Exclude patterns take precedence over include patterns.

**Default patterns:**

**Sources:** [ext/rfmt/src/config/mod.rs236-240](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L236-L240)

### Pattern Matching Logic

**Sources:** [ext/rfmt/src/config/mod.rs192-226](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L192-L226)

## Validation Rules

Configuration values are validated when loaded. Invalid values produce a `ConfigError`.

### Line Length Validation

| Rule | Min | Max | Rationale |
| --- | --- | --- | --- |
| `line_length` | 40 | 500 | Prevent unreadable formatting (too short) or ineffective wrapping (too long) |

**Sources:** [ext/rfmt/src/config/mod.rs162-169](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L162-L169)

### Indent Width Validation

| Rule | Min | Max | Rationale |
| --- | --- | --- | --- |
| `indent_width` | 1 | 8 | Prevent zero indentation or excessive spacing |

**Sources:** [ext/rfmt/src/config/mod.rs171-178](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L171-L178)

## Environment Variables

In addition to file-based configuration, rfmt supports environment variables for controlling logging behavior.

### Logging Configuration

**Sources:** [ext/rfmt/src/logging/logger.rs24-44](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/logging/logger.rs#L24-L44)

### Available Environment Variables

| Variable | Type | Default | Description |
| --- | --- | --- | --- |
| `DEBUG` | flag | unset | Enable debug logging (sets level to Info) |
| `RFMT_DEBUG` | flag | unset | Enable rfmt-specific debug logging (sets level to Info) |
| `RUST_LOG` | flag | unset | Enable Rust logging (sets level to Info) |
| `RFMT_LOG` | level | derived | Explicitly set log level: `error`, `warn`, `info`, `debug`, `trace` |

**Sources:** [ext/rfmt/src/logging/logger.rs25-38](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/logging/logger.rs#L25-L38) [docs/user\_guide.md430-456](https://github.com/fs0414/rfmt/blob/90c575e6/docs/user_guide.md#L430-L456)

### Usage Examples

**Sources:** [README.md181-187](https://github.com/fs0414/rfmt/blob/90c575e6/README.md#L181-L187) [docs/user\_guide.md432-449](https://github.com/fs0414/rfmt/blob/90c575e6/docs/user_guide.md#L432-L449)

## Default Configuration

When no configuration file is found, rfmt uses these defaults:

**Sources:** [ext/rfmt/src/config/mod.rs229-243](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L229-L243) [ext/rfmt/src/config/mod.rs245-252](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L245-L252) [ext/rfmt/src/config/mod.rs255-264](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L255-L264) [ext/rfmt/src/config/mod.rs267-274](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L267-L274)

## Configuration Loading Flow

**Sources:** [ext/rfmt/src/config/mod.rs102-157](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L102-L157)

## Configuration in Tests

Test examples demonstrate configuration behavior:

| Test | Configuration | Expected Behavior |
| --- | --- | --- |
| `test_default_config` | None | Uses built-in defaults: indent\_width=2, line\_length=100 |
| `test_load_valid_config` | Custom YAML | Loads and applies custom values |
| `test_validate_line_length_too_small` | line\_length=30 | Fails validation with ConfigError |
| `test_validate_indent_width` | indent\_width=10 | Fails validation with ConfigError |
| `test_should_include_basic` | Default patterns | Includes `lib/foo.rb`, excludes `vendor/gem/foo.rb` |
| `test_partial_config_uses_defaults` | line\_length=80 only | Uses 80 for line\_length, defaults for other options |

**Sources:** [ext/rfmt/src/config/mod.rs278-439](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/src/config/mod.rs#L278-L439) [spec/config\_formatting\_spec.rb1-171](https://github.com/fs0414/rfmt/blob/90c575e6/spec/config_formatting_spec.rb#L1-L171)

Dismiss

Refresh this wiki

Enter email to refresh

### On this page

* [Configuration Options Reference](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#configuration-options-reference)
* [Configuration Discovery](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#configuration-discovery)
* [Discovery Order](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#discovery-order)
* [File Name Priority](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#file-name-priority)
* [Configuration File Structure](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#configuration-file-structure)
* [Complete Example](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#complete-example)
* [Configuration Options](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#configuration-options)
* [Top-Level Options](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#top-level-options)
* [Parser Configuration](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#parser-configuration)
* [Formatting Configuration](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#formatting-configuration)
* [IndentStyle Enum](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#indentstyle-enum)
* [QuoteStyle Enum](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#quotestyle-enum)
* [Style Configuration](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#style-configuration)
* [HashSyntax Enum](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#hashsyntax-enum)
* [TrailingComma Enum](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#trailingcomma-enum)
* [File Filtering](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#file-filtering)
* [Include Patterns](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#include-patterns)
* [Exclude Patterns](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#exclude-patterns)
* [Pattern Matching Logic](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#pattern-matching-logic)
* [Validation Rules](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#validation-rules)
* [Line Length Validation](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#line-length-validation)
* [Indent Width Validation](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#indent-width-validation)
* [Environment Variables](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#environment-variables)
* [Logging Configuration](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#logging-configuration)
* [Available Environment Variables](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#available-environment-variables)
* [Usage Examples](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#usage-examples)
* [Default Configuration](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#default-configuration)
* [Configuration Loading Flow](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#configuration-loading-flow)
* [Configuration in Tests](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html#configuration-in-tests)
