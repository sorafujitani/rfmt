---
title: "Release Process | fs0414/rfmt | DeepWiki"
source_url: "https://deepwiki.com/fs0414/rfmt/6.3-release-process"
fetched_at: "2026-01-13T10:53:43.101777+00:00"
---



Loading...

Index your code with Devin

[DeepWiki](https://deepwiki.com/)

[DeepWiki](https://deepwiki.com/)

[fs0414/rfmt](https://github.com/fs0414/rfmt "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 3 January 2026 ([90c575](https://github.com/fs0414/rfmt/commits/90c575e6))

* [Overview](https://deepwiki.com/fs0414/rfmt/1-overview.html)
* [Architecture Overview](https://deepwiki.com/fs0414/rfmt/1.1-architecture-overview.html)
* [Key Concepts](https://deepwiki.com/fs0414/rfmt/1.2-key-concepts.html)
* [Getting Started](https://deepwiki.com/fs0414/rfmt/2-getting-started.html)
* [Installation](https://deepwiki.com/fs0414/rfmt/2.1-installation.html)
* [Configuration](https://deepwiki.com/fs0414/rfmt/2.2-configuration.html)
* [User Guides](https://deepwiki.com/fs0414/rfmt/3-user-guides.html)
* [CLI Usage](https://deepwiki.com/fs0414/rfmt/3.1-cli-usage.html)
* [Ruby API](https://deepwiki.com/fs0414/rfmt/3.2-ruby-api.html)
* [Editor Integration](https://deepwiki.com/fs0414/rfmt/3.3-editor-integration.html)
* [Core Systems](https://deepwiki.com/fs0414/rfmt/4-core-systems.html)
* [AST Representation](https://deepwiki.com/fs0414/rfmt/4.1-ast-representation.html)
* [Formatting Engine (Emitter)](https://deepwiki.com/fs0414/rfmt/4.2-formatting-engine-(emitter).html)
* [Parser Integration (PrismBridge)](https://deepwiki.com/fs0414/rfmt/4.3-parser-integration-(prismbridge).html)
* [Configuration System](https://deepwiki.com/fs0414/rfmt/4.4-configuration-system.html)
* [Caching System](https://deepwiki.com/fs0414/rfmt/4.5-caching-system.html)
* [Logging System](https://deepwiki.com/fs0414/rfmt/4.6-logging-system.html)
* [Formatting Behavior](https://deepwiki.com/fs0414/rfmt/5-formatting-behavior.html)
* [Control Flow Formatting](https://deepwiki.com/fs0414/rfmt/5.1-control-flow-formatting.html)
* [Exception Handling Formatting](https://deepwiki.com/fs0414/rfmt/5.2-exception-handling-formatting.html)
* [Lambda and Block Formatting](https://deepwiki.com/fs0414/rfmt/5.3-lambda-and-block-formatting.html)
* [Development](https://deepwiki.com/fs0414/rfmt/6-development.html)
* [Building from Source](https://deepwiki.com/fs0414/rfmt/6.1-building-from-source.html)
* [Testing](https://deepwiki.com/fs0414/rfmt/6.2-testing.html)
* [Release Process](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html)
* [Reference](https://deepwiki.com/fs0414/rfmt/7-reference.html)
* [Node Types Reference](https://deepwiki.com/fs0414/rfmt/7.1-node-types-reference.html)
* [Configuration Options Reference](https://deepwiki.com/fs0414/rfmt/7.2-configuration-options-reference.html)
* [Error Codes Reference](https://deepwiki.com/fs0414/rfmt/7.3-error-codes-reference.html)
* [Performance and Benchmarks](https://deepwiki.com/fs0414/rfmt/7.4-performance-and-benchmarks.html)

Menu

# Release Process

Relevant source files

* [CHANGELOG.md](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md)
* [Cargo.lock](https://github.com/fs0414/rfmt/blob/90c575e6/Cargo.lock)
* [Gemfile.lock](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock)
* [RELEASE.ja.md](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md)
* [ext/rfmt/Cargo.toml](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml)
* [lib/rfmt/version.rb](https://github.com/fs0414/rfmt/blob/90c575e6/lib/rfmt/version.rb)

This document describes the step-by-step procedures for releasing new versions of rfmt to RubyGems.org. It covers both automated releases via GitHub Actions and manual release workflows for platform-specific native gems.

For information about building rfmt from source during development, see [Building from Source](https://deepwiki.com/fs0414/rfmt/6.1-building-from-source.html). For testing procedures before release, see [Testing](https://deepwiki.com/fs0414/rfmt/6.2-testing.html).

---

## Version Management

rfmt uses a dual-version system where version numbers must be synchronized between the Ruby and Rust components. The version number follows semantic versioning (MAJOR.MINOR.PATCH).

### Version Files

Two files must be updated for each release:

**Ruby Version**: [lib/rfmt/version.rb4](https://github.com/fs0414/rfmt/blob/90c575e6/lib/rfmt/version.rb#L4-L4) defines `Rfmt::VERSION`:

**Rust Version**: [ext/rfmt/Cargo.toml3](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L3-L3) defines the crate version:

**Dependency Lock Files**: After updating `Cargo.toml`, [Cargo.lock1222](https://github.com/fs0414/rfmt/blob/90c575e6/Cargo.lock#L1222-L1222) is automatically updated by running `cargo build`. [Gemfile.lock4](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L4-L4) reflects the gem version.

### Version Synchronization Workflow

**Sources**: [lib/rfmt/version.rb1-6](https://github.com/fs0414/rfmt/blob/90c575e6/lib/rfmt/version.rb#L1-L6) [ext/rfmt/Cargo.toml1-7](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L1-L7) [Cargo.lock1221-1246](https://github.com/fs0414/rfmt/blob/90c575e6/Cargo.lock#L1221-L1246)

---

## CHANGELOG Maintenance

[CHANGELOG.md1-182](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md#L1-L182) documents all changes in a structured format. Each release must have a corresponding entry.

### CHANGELOG Format

### Recent Release Example

[CHANGELOG.md3-7](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md#L3-L7) shows the latest release:

| Section | Purpose | Examples |
| --- | --- | --- |
| **Added** | New features, APIs, or capabilities | Loop node types, Lambda support, LSP integration |
| **Changed** | Breaking changes, renamed APIs, behavior modifications | Default config filename, simplified test suite |
| **Fixed** | Bug fixes, error corrections | Ruby 3.4 compatibility, comment location, indent fixes |

**Sources**: [CHANGELOG.md1-182](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md#L1-L182) [CHANGELOG.md3-7](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md#L3-L7)

---

## Automated Release Process

The recommended release method uses GitHub Actions to build platform-specific gems and publish to RubyGems.org automatically.

### Release Pipeline Architecture

**Sources**: [RELEASE.ja.md5-62](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L5-L62) [Gemfile.lock99-101](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L99-L101)

### Automated Release Steps

#### 1. Version and CHANGELOG Updates

#### 2. Commit and Push

#### 3. Tag Release

#### 4. Monitor GitHub Actions

The workflow automatically:

1. Detects the `v*` tag
2. Builds gems for all platforms in parallel
3. Publishes to RubyGems.org (if `RUBYGEMS_API_KEY` secret is configured)
4. Creates GitHub Release with gem artifacts

**Sources**: [RELEASE.ja.md11-62](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L11-L62)

---

## Manual Release Process

When automated releases are unavailable or for specific platform testing, manual builds can be performed using rake tasks.

### Platform-Specific Build Tasks

**Sources**: [RELEASE.ja.md84-108](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L84-L108) [Gemfile.lock38-42](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L38-L42)

### Manual Build Steps

#### 1. Prerequisites

| Requirement | Version | Purpose |
| --- | --- | --- |
| Rust Toolchain | 1.70+ | Compile native extension |
| rb-sys | 0.9.119 | Ruby-Rust FFI builder |
| rake-compiler | 1.3.0 | Cross-platform gem builder |
| RubyGems Account | - | Publishing credentials |

Verify dependencies from [Gemfile.lock38-42](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L38-L42) and [ext/rfmt/Cargo.toml14-16](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L14-L16)

#### 2. Build for Each Platform

**Linux (x86\_64)**:

**macOS (ARM64)**:

**macOS (x86\_64)**:

**Windows (x64)**:

#### 3. Publish Gems

#### 4. Create Git Tag and GitHub Release

Then manually create GitHub Release at `https://github.com/fs0414/rfmt/releases/new`.

**Sources**: [RELEASE.ja.md64-138](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L64-L138) [Gemfile.lock99-101](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L99-L101)

---

## Post-Release Verification

After publishing, verify the release is available and functional.

### Verification Checklist

**Sources**: [RELEASE.ja.md140-156](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L140-L156)

### Verification Commands

#### 1. RubyGems.org Availability

Check `https://rubygems.org/gems/rfmt` shows the new version.

#### 2. Installation Test

#### 3. Functionality Test

#### 4. Platform-Specific Tests

On each target platform (Linux, macOS ARM64, macOS x86\_64, Windows), verify:

* Gem installs without compilation
* Native extension loads successfully
* Formatting produces correct output

**Sources**: [RELEASE.ja.md140-156](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L140-L156)

---

## Troubleshooting

Common issues and solutions during the release process.

### GitHub Actions Build Failures

| Symptom | Potential Cause | Solution |
| --- | --- | --- |
| Rust compilation error | Outdated toolchain | Update Rust version in workflow |
| FFI binding failure | rb-sys incompatibility | Check [ext/rfmt/Cargo.toml15-16](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L15-L16) for version |
| Test failures | Breaking changes | Review test output in Actions tab |
| Platform-specific failure | Missing dependencies | Check platform-specific build logs |

**Investigation**: Check GitHub Actions logs at `https://github.com/fs0414/rfmt/actions`.

### RubyGems Publishing Failures

| Error | Cause | Resolution |
| --- | --- | --- |
| `401 Unauthorized` | Invalid API key | Update `RUBYGEMS_API_KEY` secret |
| `403 Forbidden` | Insufficient permissions | Verify gem ownership |
| `422 Unprocessable Entity` | Version already exists | Increment version number |
| `Gemspec validation failed` | Invalid gemspec | Check rfmt.gemspec syntax |

**API Key Setup**: Repository Settings → Secrets → Actions → `RUBYGEMS_API_KEY`

### Version Synchronization Issues

**Common Scenario**: [Cargo.lock1222](https://github.com/fs0414/rfmt/blob/90c575e6/Cargo.lock#L1222-L1222) shows different version than [ext/rfmt/Cargo.toml3](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L3-L3)

**Solution**:

### Cross-Platform Build Issues

**Platform-Specific Toolchain Requirements**:

| Platform | Required Tools | Notes |
| --- | --- | --- |
| Linux x86\_64 | gcc, make | Standard build-essential |
| macOS ARM64 | Xcode Command Line Tools | Native Apple Silicon |
| macOS x86\_64 | Xcode Command Line Tools | Rosetta 2 if on ARM64 host |
| Windows x64 | MinGW-w64 | UCRT runtime required |

**Dependency Reference**: [Gemfile.lock41-42](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L41-L42) shows `rb_sys` uses `rake-compiler-dock` for cross-compilation.

**Sources**: [RELEASE.ja.md158-176](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L158-L176) [ext/rfmt/Cargo.toml15-16](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L15-L16) [Gemfile.lock38-42](https://github.com/fs0414/rfmt/blob/90c575e6/Gemfile.lock#L38-L42)

---

## Release Checklist

Use this checklist for each release:

* Update [lib/rfmt/version.rb4](https://github.com/fs0414/rfmt/blob/90c575e6/lib/rfmt/version.rb#L4-L4) with new version
* Update [ext/rfmt/Cargo.toml3](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L3-L3) with matching version
* Run `cargo build` to update [Cargo.lock1222](https://github.com/fs0414/rfmt/blob/90c575e6/Cargo.lock#L1222-L1222)
* Add release notes to [CHANGELOG.md1](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md#L1-L1) with date
* Commit version changes: `git commit -m "Bump version to X.Y.Z"`
* Push to main: `git push origin main`
* Create and push tag: `git tag vX.Y.Z && git push origin vX.Y.Z`
* Monitor GitHub Actions build progress
* Verify gems published to RubyGems.org
* Test installation: `gem install rfmt`
* Verify version: `rfmt --version`
* Test functionality: Basic formatting commands
* Create GitHub Release with CHANGELOG excerpt
* Announce release (if applicable)

**Sources**: [RELEASE.ja.md1-182](https://github.com/fs0414/rfmt/blob/90c575e6/RELEASE.ja.md#L1-L182) [lib/rfmt/version.rb1-6](https://github.com/fs0414/rfmt/blob/90c575e6/lib/rfmt/version.rb#L1-L6) [ext/rfmt/Cargo.toml1-7](https://github.com/fs0414/rfmt/blob/90c575e6/ext/rfmt/Cargo.toml#L1-L7) [CHANGELOG.md1-182](https://github.com/fs0414/rfmt/blob/90c575e6/CHANGELOG.md#L1-L182)

Dismiss

Refresh this wiki

Enter email to refresh

### On this page

* [Release Process](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#release-process)
* [Version Management](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#version-management)
* [Version Files](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#version-files)
* [Version Synchronization Workflow](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#version-synchronization-workflow)
* [CHANGELOG Maintenance](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#changelog-maintenance)
* [CHANGELOG Format](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#changelog-format)
* [Recent Release Example](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#recent-release-example)
* [Automated Release Process](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#automated-release-process)
* [Release Pipeline Architecture](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#release-pipeline-architecture)
* [Automated Release Steps](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#automated-release-steps)
* [1. Version and CHANGELOG Updates](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#1-version-and-changelog-updates)
* [2. Commit and Push](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#2-commit-and-push)
* [3. Tag Release](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#3-tag-release)
* [4. Monitor GitHub Actions](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#4-monitor-github-actions)
* [Manual Release Process](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#manual-release-process)
* [Platform-Specific Build Tasks](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#platform-specific-build-tasks)
* [Manual Build Steps](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#manual-build-steps)
* [1. Prerequisites](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#1-prerequisites)
* [2. Build for Each Platform](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#2-build-for-each-platform)
* [3. Publish Gems](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#3-publish-gems)
* [4. Create Git Tag and GitHub Release](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#4-create-git-tag-and-github-release)
* [Post-Release Verification](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#post-release-verification)
* [Verification Checklist](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#verification-checklist)
* [Verification Commands](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#verification-commands)
* [1. RubyGems.org Availability](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#1-rubygemsorg-availability)
* [2. Installation Test](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#2-installation-test)
* [3. Functionality Test](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#3-functionality-test)
* [4. Platform-Specific Tests](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#4-platform-specific-tests)
* [Troubleshooting](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#troubleshooting)
* [GitHub Actions Build Failures](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#github-actions-build-failures)
* [RubyGems Publishing Failures](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#rubygems-publishing-failures)
* [Version Synchronization Issues](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#version-synchronization-issues)
* [Cross-Platform Build Issues](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#cross-platform-build-issues)
* [Release Checklist](https://deepwiki.com/fs0414/rfmt/6.3-release-process.html#release-checklist)
