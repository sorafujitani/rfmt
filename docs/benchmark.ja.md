# パフォーマンスベンチマーク

## テスト環境

### システム
- OS: Darwin 23.6.0
- CPU: arm64 (Apple Silicon)
- Ruby: 3.4.8

### ツール
- rfmt: 1.3.3
- RuboCop: 1.82.1

### テストデータ
- 総ファイル数: 53 Rubyファイル
- ファイル種類: モデル、コントローラー、ライブラリー、サービス
- アプリケーション種別: Rails形式

### 測定方法
- 測定回数: 各テスト5回
- 収集指標: 平均値、中央値、標準偏差
- 測定日: 2026-01-17

## 測定結果

### 1. 小規模ファイルのパフォーマンス

テスト: `app/models` ディレクトリ (9ファイル、合計約1,000行)

| ツール | 平均 | 中央値 | 標準偏差 | 最小 | 最大 |
|------|---------|--------|---------|-----|-----|
| rfmt | 122.1ms | - | 19.1ms | - | - |
| RuboCop | 798.0ms | - | 23.1ms | - | - |

**比率**: 6.54倍

### 2. 中規模ファイルのパフォーマンス

テスト: `lib` ディレクトリ (9ファイル、合計約1,700行)

| ツール | 平均 | 中央値 | 標準偏差 | 最小 | 最大 |
|------|---------|--------|---------|-----|-----|
| rfmt | 120.4ms | - | 5.1ms | - | - |
| RuboCop | 797.0ms | - | 16.3ms | - | - |

**比率**: 6.62倍

### 3. 大規模プロジェクトのパフォーマンス

テスト: `large_project/app/models` ディレクトリ (35ファイル、合計約4,200行)

| ツール | 平均 | 中央値 | 標準偏差 | 最小 | 最大 |
|------|---------|--------|---------|-----|-----|
| rfmt | 121.5ms | - | 9.5ms | - | - |
| RuboCop | 798.1ms | - | 16.0ms | - | - |

**比率**: 6.57倍

## 測定された性能特性

### 実行時間統計

rfmt:
- 標準偏差: 5-19ms
- 平均実行時間: 全テストサイズで約120ms
- 実行間変動: 5.1-19.1ms

RuboCop:
- 標準偏差: 16-23ms
- 平均実行時間: 全テストサイズで約798ms
- 実行間変動: 16.0-23.1ms

### プロジェクトサイズ別性能

| ファイル数 | 合計行数 | rfmt | RuboCop | 比率 |
|-------|---------|------|---------|-------|
| 9 | ~1,000 | 122ms | 798ms | 6.54倍 |
| 9 | ~1,700 | 120ms | 797ms | 6.62倍 |
| 35 | ~4,200 | 122ms | 798ms | 6.57倍 |

異なるファイル数と行数での実行時間測定。

## 実行時間比較

| コンテキスト | rfmt | RuboCop | 時間差 |
|---------|------|---------|--------|
| エディタ保存操作 | 約120ms | 約798ms | 678ms |
| pre-commitフック | 約120ms | 約798ms | 678ms |
| CIパイプラインチェック | 約120ms | 約798ms | 678ms |

## 性能指標まとめ

- 平均速度比: 6.54-6.62倍
- rfmt平均実行時間: 120-122ms
- RuboCop平均実行時間: 797-798ms
- 実行時間差: 約678ms

## 生データ

完全なベンチマーク結果:
- [`tmp/benchmark_test/comparison_report.txt`](../tmp/benchmark_test/comparison_report.txt)

## ベンチマークスクリプト

ソース: [`tmp/benchmark_test/comparison_benchmark.rb`](../tmp/benchmark_test/comparison_benchmark.rb)

ベンチマーク実行方法:
```bash
ruby tmp/benchmark_test/comparison_benchmark.rb
```
